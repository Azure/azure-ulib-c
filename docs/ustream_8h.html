<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>uLib: C:/repos/uLib-WIP/inc/ustream.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">uLib
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_bfccd401955b95cf8c75461437045ac0.html">inc</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">ustream.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="ustream__base_8h_source.html">ustream_base.h</a>&quot;</code><br />
<code>#include &quot;azure_macro_utils/macro_utils.h&quot;</code><br />
<code>#include &quot;umock_c/umock_c_prod.h&quot;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stddef.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
</div>
<p><a href="ustream_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a14b1b96c2d1f6844efef347f5667b3cb"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ustream_8h.html#a14b1b96c2d1f6844efef347f5667b3cb">USTREAM_BUFFER_RELEASE_CALLBACK</a>) (void *)</td></tr>
<tr class="memdesc:a14b1b96c2d1f6844efef347f5667b3cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signature of the function to release inner buffer.  <a href="#a14b1b96c2d1f6844efef347f5667b3cb">More...</a><br /></td></tr>
<tr class="separator:a14b1b96c2d1f6844efef347f5667b3cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a944d6e548bf77da57829e4af82323534"><td class="memItemLeft" align="right" valign="top">const uint8_t *const&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ustream_8h.html#a944d6e548bf77da57829e4af82323534">ustream_create</a> (__VAR_ARGS__) buffer</td></tr>
<tr class="memdesc:a944d6e548bf77da57829e4af82323534"><td class="mdescLeft">&#160;</td><td class="mdescRight">Factory to create a new uStream.  <a href="#a944d6e548bf77da57829e4af82323534">More...</a><br /></td></tr>
<tr class="separator:a944d6e548bf77da57829e4af82323534"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8541e3cae2257af134a1c9d32fb9d1d7"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ustream_8h.html#a8541e3cae2257af134a1c9d32fb9d1d7">MOCKABLE_FUNCTION</a> (, <a class="el" href="ustream__base_8h.html#a0a5ccedc21cdc1edebc01278ce22d67b">USTREAM</a> *, ustream_multi_create)</td></tr>
<tr class="memdesc:a8541e3cae2257af134a1c9d32fb9d1d7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Factory to create a new uStreamMulti.  <a href="#a8541e3cae2257af134a1c9d32fb9d1d7">More...</a><br /></td></tr>
<tr class="separator:a8541e3cae2257af134a1c9d32fb9d1d7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abaab0ad2e40cca31fbd01e139afb4e2a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ustream__base_8h.html#a0a5ccedc21cdc1edebc01278ce22d67b">USTREAM</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ustream_8h.html#abaab0ad2e40cca31fbd01e139afb4e2a">ustream_multi_append</a> (__VAR_ARGS__) ustream_interface</td></tr>
<tr class="memdesc:abaab0ad2e40cca31fbd01e139afb4e2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Append an existent uStream to the uStreamMulti.  <a href="#abaab0ad2e40cca31fbd01e139afb4e2a">More...</a><br /></td></tr>
<tr class="separator:abaab0ad2e40cca31fbd01e139afb4e2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a5f20c6ae0f26bfcb466351bd1a8408d8"><td class="memItemLeft" align="right" valign="top"><a id="a5f20c6ae0f26bfcb466351bd1a8408d8"></a>
const uint8_t *const&#160;</td><td class="memItemRight" valign="bottom"><b>size_t</b></td></tr>
<tr class="separator:a5f20c6ae0f26bfcb466351bd1a8408d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfa42adf3e4cd0850a0238ad1c92511d"><td class="memItemLeft" align="right" valign="top"><a id="adfa42adf3e4cd0850a0238ad1c92511d"></a>
const uint8_t *const&#160;</td><td class="memItemRight" valign="bottom"><b>buffer_length</b></td></tr>
<tr class="separator:adfa42adf3e4cd0850a0238ad1c92511d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd819a18df6a7dc1ac28382a3fd920c8"><td class="memItemLeft" align="right" valign="top"><a id="afd819a18df6a7dc1ac28382a3fd920c8"></a>
const uint8_t *const&#160;</td><td class="memItemRight" valign="bottom"><b>inner_free</b></td></tr>
<tr class="separator:afd819a18df6a7dc1ac28382a3fd920c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada5b2b1e9af2329582911b0444875085"><td class="memItemLeft" align="right" valign="top"><a id="ada5b2b1e9af2329582911b0444875085"></a>
<a class="el" href="ustream__base_8h.html#a0a5ccedc21cdc1edebc01278ce22d67b">USTREAM</a> <a class="el" href="ustream__base_8h.html#a0a5ccedc21cdc1edebc01278ce22d67b">USTREAM</a>&#160;</td><td class="memItemRight" valign="bottom"><b>ustream_to_append</b></td></tr>
<tr class="separator:ada5b2b1e9af2329582911b0444875085"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a14b1b96c2d1f6844efef347f5667b3cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14b1b96c2d1f6844efef347f5667b3cb">&#9670;&nbsp;</a></span>USTREAM_BUFFER_RELEASE_CALLBACK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t *const USTREAM_BUFFER_RELEASE_CALLBACK</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Signature of the function to release inner buffer. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">void*</td><td>void pointer to memory that needs to be free'd</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>void </dd></dl>

<p class="definition">Definition at line <a class="el" href="ustream_8h_source.html#l00034">34</a> of file <a class="el" href="ustream_8h_source.html">ustream.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a8541e3cae2257af134a1c9d32fb9d1d7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8541e3cae2257af134a1c9d32fb9d1d7">&#9670;&nbsp;</a></span>MOCKABLE_FUNCTION()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MOCKABLE_FUNCTION </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ustream__base_8h.html#a0a5ccedc21cdc1edebc01278ce22d67b">USTREAM</a> *&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">ustream_multi_create&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Factory to create a new uStreamMulti. </p>
<p>uStreamMulti is a uStream that handles multiple heterogeneous uStreams and exposes it with a single interface. The sequence of the uStreams is determined by the appended sequence: first in first out.</p>
<p>Note that the <code>read()</code> API will return the content of the appended uStreams as if it was a single uStream. There is nothing that identifies where one uStream stops and the next one starts.</p>
<p>Cloning a uStreamMulti creates a new instance that has the same content of the original one at the moment where the clone was made. Any change in the original uStreamMulti will <b>NOT</b> be reflected in its clone, and changes in the clone will not change the original uStreamMulti as well.</p>
<p>The uStreamMulti clones each appended uStream. It will enforce the immutable characteristic of the uStream.</p>
<p>Because a uStreamMulti exposes a uStream interface, it can be appended to another uStreamMulti.</p>
<p>Releasing part of a uStreamMulti will dispose the appended uStreams that are not necessary anymore, and the disposal of the uStreamMulti will dispose all appended uStreams.</p>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="ustream__base_8h.html#a0a5ccedc21cdc1edebc01278ce22d67b">USTREAM</a>* with the uStreamMulti interface. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">not-NULL</td><td>If the uStreamMulti was created with success. </td></tr>
    <tr><td class="paramname">NULL</td><td>If there is no memory to create the new uStreamMulti. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a944d6e548bf77da57829e4af82323534"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a944d6e548bf77da57829e4af82323534">&#9670;&nbsp;</a></span>ustream_create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const uint8_t* const ustream_create </td>
          <td>(</td>
          <td class="paramtype">__VAR_ARGS__&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Factory to create a new uStream. </p>
<p>This factory creates a uStream that handles the content of the provided buffer. As a result, it will return a <a class="el" href="ustream__base_8h.html#a0a5ccedc21cdc1edebc01278ce22d67b">USTREAM</a>* with this content. The created uStream takes ownership of the passed memory and will release the memory with the passed <a class="el" href="ustream_8h.html#a14b1b96c2d1f6844efef347f5667b3cb" title="Signature of the function to release inner buffer.">USTREAM_BUFFER_RELEASE_CALLBACK</a> function when the ref count goes to zero.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">buffer</td><td>The <code>const uint8_t* const</code> that points to a memory position where the buffer starts. It cannot be <code>NULL</code>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buffer_length</td><td>The <code>size_t</code> with the number of <code>uint8_t</code> in the provided buffer. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">inner_free</td><td>The <a class="el" href="ustream_8h.html#a14b1b96c2d1f6844efef347f5667b3cb" title="Signature of the function to release inner buffer.">USTREAM_BUFFER_RELEASE_CALLBACK</a> function that will be called for the inner buffer once all the references to the uStream are released. If <code>NULL</code> is passed, the data is assumed to be constant with no need to be free'd. In other words, there is no need for notification that the memory can be released. As a default, users may use the standard <code>free</code> to release malloc'd memory.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="ustream__base_8h.html#a0a5ccedc21cdc1edebc01278ce22d67b">USTREAM</a>* with the uStream interface. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">not-NULL</td><td>If the uStream was created with success. </td></tr>
    <tr><td class="paramname">NULL</td><td>If there is no memory to create the new uStream. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abaab0ad2e40cca31fbd01e139afb4e2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abaab0ad2e40cca31fbd01e139afb4e2a">&#9670;&nbsp;</a></span>ustream_multi_append()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ustream__base_8h.html#a0a5ccedc21cdc1edebc01278ce22d67b">USTREAM</a>* ustream_multi_append </td>
          <td>(</td>
          <td class="paramtype">__VAR_ARGS__&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Append an existent uStream to the uStreamMulti. </p>
<p>Append will add a new uStream at the end of the list of uStreams in the uStreamMulti. To maintain the immutability, every copy of the uStreamMulti will create an independent instance of it, which means that appending a new uStream in a current instance of the uStreamMulti will not affect the other instances.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">ustream_interface</td><td>The <a class="el" href="ustream__base_8h.html#a0a5ccedc21cdc1edebc01278ce22d67b">USTREAM</a>* with the handle of the uStreamMulti. It cannot be <code>NULL</code> and it shall be a valid uStream that is a type of uStreamMulti. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">ustream_to_append</td><td>The <a class="el" href="ustream__base_8h.html#a0a5ccedc21cdc1edebc01278ce22d67b">USTREAM</a>* with the handle of the uStream to add to the uStreamMulti. It cannot be <code>NULL</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The <a class="el" href="ulib__result_8h.html#a77cf398de96048194cbe431aea64794f">ULIB_RESULT</a> with the result of the append operation. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ULIB_SUCCESS</td><td>If the uStreamMulti appended the provided uStream with success. </td></tr>
    <tr><td class="paramname">ULIB_ILLEGAL_ARGUMENT_ERROR</td><td>If the one of the provided parameters is invalid. </td></tr>
    <tr><td class="paramname">ULIB_OUT_OF_MEMORY_ERROR</td><td>If there is no memory to append the uStream. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
